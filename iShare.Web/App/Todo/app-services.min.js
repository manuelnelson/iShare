TodoApp.factory("todoService",["$resource",function(a){return a("/api/todos/:Id",{Id:"@Id"},{update:{method:"PUT"},deleteAll:{method:"DELETE"}})}]),TodoApp.factory("loadingService",function(){var a={requestCount:0,isLoading:function(){return a.requestCount>0},increment:function(){a.requestCount++},decrement:function(){a.requestCount--,a.message=Application.properties.defaultMessage},message:Application.properties.defaultMessage};return a}),TodoApp.factory("onStartInterceptor",["loadingService",function(a){return function(b,c){return a.requestCount++,b}}]),TodoApp.factory("onCompleteInterceptor",["loadingService","messageService",function(a,b){return function(c){var d=function(b){return a.requestCount--,a.message=Application.properties.defaultMessage,b},e=function(c){return a.requestCount--,a.message=Application.properties.defaultMessage,b.handleError(c),c};return c.then(d,e)}}]),TodoApp.config(["$httpProvider",function(a){a.responseInterceptors.push("onCompleteInterceptor")}]),TodoApp.run(["$http","onStartInterceptor",function(a,b){a.defaults.transformRequest.push(b)}]),TodoApp.factory("messageService",function(){var a={messageOptions:{title:"",message:"",alertType:Application.properties.messageType.Warning},showMessage:function(b,c,d){a.messageOptions.alertType=typeof d=="undefined"?Application.properties.messageType.Warning:d,a.messageOptions.title=b,a.messageOptions.message=c,a.show=!0},isShowing:function(){return a.show},closeMessage:function(){a.show=!1},handleError:function(b){switch(b.status){case 400:return a.showMessage("Not so fast",b.data.ResponseStatus.Message,Application.properties.messageType.Error),!1;case 401:return a.showMessage("Unauthorized","You must be logged in to complete this action. Log in <a href='/Account/LogOn/' title='Log In' >here</a>",Application.properties.messageType.Warning),!1;default:return a.showMessage("Uh oh!","Sorry, we could not process your request.  The error has been logged and we will do our best to correct the error asap.",Application.properties.messageType.Error),!1}}};return a})